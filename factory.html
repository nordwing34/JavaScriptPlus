<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>JS2: Lesson 02 (автозавод)</title>
</head>
<body>

<script>
	/**
	 * Класс "Автомобиль"
	 */
	class Car{
		constructor(title, price){
			this.title = title;
			this.price = price;
		}
	}

	/**
	 * Класс "Завод"
	 */
	class Factory{
		constructor(titleFactory){
			this.titleFactory = titleFactory;
		}

		/**
		 * Метод для создания автомобилей
		 * Цена каждого автомобиля - случайная
		 * 
		 * @param title: название автомобиля
		 */
		createCar(title){
			console.log(`Сбоорка автомобиля ${title} на заводе ${this.titleFactory} началась`);
			const car = new Car(title, parseInt(Math.random() * 4000 + 1000) );
			return car;
		}
	}


	/**
	 * Класс "Заказ"
	 */
	class Order{

		/**
		 * @param countCars: количество автомобилей, которые нужно сделать заводу
		 * @param factory: название завода
		 * @param models: марки автомобилей (массив)
		 * @param dealer: дилер, который делает заказ
		 */
		constructor(countCars, factory, models, dealer){
			this.countCars = countCars;
			this.factory = factory;
			this.models = models;
			this.dealer = dealer;
			this.cars = [];		// фура для перевозки автомобилей с завода к дилеру
			this.sumOrder = 0;	// сумма заказа, первоначально - ноль
			this.initOrder();	// метод для заполнения фуры готовыми автомобилями
			this.showInfo();
		}

		/**
		 * Заполнение фуры готовыми автомобилями
		 * Цикл по количеству заказанных автомобилей
		 * Заполняем массив this.cars методом push()
		 * Каждый новый элемент получается путём вызова метода factory.createCar()
		 * Этому методу передаём назвние модели автомобиля, который нужно сделать
		 * Названия моделей выбираются рандомно
		 */
		initOrder(){
			for(let i = 0; i < this.countCars; i++){
				this.cars.push(this.factory.createCar(
					this.models[parseInt(Math.random() * this.models.length)]
				));
				this.sumOrder += this.cars[i].price;
			}
		}

		/**
		 */
		showInfo(){
			this.cars.forEach(car => console.log(`Автомобиль ${car.title} стоит ${car.price}`));
			console.log(`Общая сумма заказа: ${this.sumOrder}`);
		}
	}


	/**
	 * Класс "Дилер"
	 * @param titleDealer: название дилера
	 * @param countYears: сколько он лет на рынке
	 */
	class Dealer{
		constructor(titleDealer, countYears){
			this.titleDealer = titleDealer;
			this.countYears = countYears;
		}
	}


	/**
	 * Главный класс
	 */
	class Main{
		static run(){
			const COUNT = parseInt(Math.random() * 20 - 10);	// количесво автомобилей в заказе
			const MODELS = ['Ларгус', 'Веста', 'Гранта'];		// модели, которые нужно сделать
			const FACTORY = new Factory('ВАЗ');
			const DEALER = new Dealer('Элвис', 20);
			const ORDER = new Order(COUNT, FACTORY, MODELS, DEALER);
		}
	}

	Main.run();

</script>

</body>
</html>
